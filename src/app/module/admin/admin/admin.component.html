<button class="Btn" (click)="onClick()">
  <div class="sign">
    <svg viewBox="0 0 512 512">
      <path
        d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"
      ></path>
    </svg>
  </div>

  <div class="text">Cerrar Sesión</div>
</button>

<div class="container">
  <div class="diseno">
    <h1>PANEL DE CONTROL</h1>
    <hr/>
    <button class="btn-subir" (click)="toggleModal()">CARGAR NUEVO PACIENTE</button>
  </div>
<hr/>
<div class="flex">
  <div class="search">
  <mat-form-field class="full-width">
    <input  matInput type="text" [(ngModel)]="dni"  placeholder="DNI">
</mat-form-field>
<button (click)="search()" >Buscar</button>
<div *ngIf="errorMessage">
  <p style="color: red;">No se encontraron pacientes para el DNI proporcionado.</p>
</div>
</div>

<div class="search" id="padd">
  <mat-form-field >
<input matInput type="text" [(ngModel)]="name"  placeholder="NOMBRE" style="margin: 0;">
</mat-form-field>
<button (click)="searchName()" >Buscar</button>
<div *ngIf="errorMessage">
  <p style="color: red;">No se encontraron pacientes para el nombre proporcionado.</p>
</div>
</div>
<div class="search">
  <mat-form-field class="full-width">
    <input  matInput type="date" [(ngModel)]="fechaDeCarga"  placeholder="fecha">
</mat-form-field>
<button (click)="searchByFechaDeCarga()" >Buscar</button>
<div *ngIf="errorMessage">
  <p style="color: red;">No se encontró la fecha proporcionada.</p>
</div>
</div>
</div>




<button mat-button class="btn" (click)="refrescar()">Refrescar</button>
  <table class="table" *ngIf="pacientes">
    <thead>
      <tr>
        <th>Fecha carga</th>
        <th>Nombre</th>
        <th>DNI</th>
        <th>Fecha de atención</th>
        <th>Laboratorio</th>
        <th>Archivo</th>
        <!-- <th>Editar</th> --> 
        <th>Borrar</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let paciente of pacientesEnPagina ">
        <td>{{ paciente.fechaDeCarga | safeDate }}</td>
        <td>{{ paciente.name }}</td>
        <td>{{ paciente.dni }}</td>
        <td>{{ paciente.date | formatDate }}</td>
        <td>{{ paciente.lab}}</td>
        <td><a href="{{ paciente.file }}" target="_blank">Ver Archivo</a></td>
        <!--<td><button (click)="toggleModalEdit()" class="btn-edit"><i class="fa-solid fa-pencil"></i></button></td> --> 
        <td><button (click)="eliminarPaciente(paciente.id, paciente)" class="btn-edit"><i class="fa-solid fa-trash" ></i></button></td>
      </tr>
    </tbody>
    <tfoot >
      <tr>
        <td colspan="7">
        </td>
      </tr> 
    </tfoot>

  </table>    
  <div *ngIf="totalPages > 1">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="currentPage == 1">
        <a class="page-link" href="#" (click)="cambiarPagina(currentPage - 1); $event.preventDefault()">Anterior</a>
      </li>
      <li class="page-item" *ngFor="let page of paginas" [class.active]="currentPage == page">
        <a class="page-link" href="#" (click)="cambiarPagina(page); $event.preventDefault()">{{ page }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage == totalPages">
        <a class="page-link" href="#" (click)="cambiarPagina(currentPage + 1); $event.preventDefault()">Siguiente</a>
      </li>
    </ul>
  </div>

  <br/>
</div>
<app-modal *ngIf="modalVisible" (closeModalEvent)="closeModal()"></app-modal>
<app-modal-edit *ngIf="modalVisibleEdit" (closeModalEvent)="closeModalEdit()"></app-modal-edit>
